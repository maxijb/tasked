#card-detail-shadow
#card-detail
	close-button(action="unselect()")
	.card-detail-content
		.card-detail-section
			textarea.card-detail-title(editable-element-on-place, 
										textarea-content-resize,
										ng-model="card.name", 
										update="updateCard('name', value)", 
										submitOnEnter="true",
										submitOnBlur="true")
			.buttons
		
			card-tags-widget(tags="card.tags", boardTags="boardTags")
			
		
		.card-detail-section
			.card-detail-state
				card-state-widget(state="card.state")

			manage-users-widget(users="card.users", board-users="boardUsers", remove-action="cardsService.removeUserFromCard(card, user)" add-action="cardsService.addUserToCard(card, user)")
			
			.card-detail-created
				.creator|{{ "by" | i18n}} {{ boardUsers[card.creator].name | formatUserName }} |
				.created|{{ card.createdAt | dateDistance }}


		.card-detail-section
			card-dates-widget(dates="card.dates")|Maxi
			card-time-ellapsed-widget(ellapsed="card.ellapsed")
			card-add-checklist-widget(card="card", update="cardActions.addChecklist()")
			card-add-attachment-widget(card="card", update="cardActions.addAttachment()")
			card-manage-relations-widget(card="card", update="cardActions.manageRelations()")



		.card-detail-description(editable-element, field="card.description", kind="textarea", update="updateCard('description', value)")
			p.description(ng-if="card.description", ng-bind-html="card.description | specialContent | safeHtml")
			p.edit-description(ng-if="!card.description")|{{ 'editDescription' | i18n }}
		
		.card-detail-comments
			h4|{{ "Comments" | i18n }}
			create-comment-form(card="card")
			comment-widget(ng-repeat="comment in card.comments | reverse", comment="comment", card="card")
				
		

	{{card}}